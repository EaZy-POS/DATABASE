TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`localhost` TRIGGER `insertstockpo` AFTER INSERT ON `tbl_purchase_order_detail` FOR EACH ROW BEGIN\nDECLARE count integer;\nIF new.flag=1 THEN\n	SET @count:=(SELECT COUNT(kode_item) FROM tbl_item_stock WHERE kode_item=new.kode_item);\n	IF(@count=0) THEN\n		INSERT INTO tbl_item_stock VALUES (new.kode_item,0);\n	END IF;\n	UPDATE tbl_item_stock set stock=stock+new.qty WHERE kode_item=new.kode_item;\n	\n	SET @count:=(SELECT COUNT(kode_item) FROM tbl_mutasi_stock WHERE kode_item=new.kode_item AND tipe_mutasi=\'PURCHASE\' AND tran_date=CURDATE());\n		IF(@count=0) THEN\n			INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'PURCHASE\',new.qty);\n		ELSE\n			UPDATE tbl_mutasi_stock SET qty=qty+new.qty WHERE tran_date=CURDATE() AND kode_item=new.kode_item AND tipe_mutasi=\'PURCHASE\'; \n		END IF;\nEND IF;\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER `updatestockpo` AFTER UPDATE ON `tbl_purchase_order_detail` FOR EACH ROW BEGIN\nDECLARE count integer;\nIF new.flag=1 THEN\n	SET @count:=(SELECT COUNT(kode_item) FROM tbl_item_stock WHERE kode_item=new.kode_item);\n	IF(@count=0) THEN\n		INSERT INTO tbl_item_stock VALUES (new.kode_item,0);\n	END IF;\n	UPDATE tbl_item_stock set stock=stock+new.qty WHERE kode_item=new.kode_item;\n	\n	SET @count:=(SELECT COUNT(kode_item) FROM tbl_mutasi_stock WHERE kode_item=new.kode_item AND tipe_mutasi=\'PURCHASE\' AND tran_date=CURDATE());\n		IF(@count=0) THEN\n			INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'PURCHASE\',new.qty);\n		ELSE\n			UPDATE tbl_mutasi_stock SET qty=qty+new.qty WHERE tran_date=CURDATE() AND kode_item=new.kode_item AND tipe_mutasi=\'PURCHASE\'; \n		END IF;\nEND IF;\nEND'
sql_modes=1344274432 1344274432
definers='root@localhost' 'root@localhost'
client_cs_names='utf8mb4' 'utf8mb4'
connection_cl_names='utf8mb4_general_ci' 'utf8mb4_general_ci'
db_cl_names='latin1_swedish_ci' 'latin1_swedish_ci'
