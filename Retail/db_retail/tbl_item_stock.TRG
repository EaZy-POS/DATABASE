TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`localhost` TRIGGER `afterupdateitemstock` AFTER UPDATE ON `tbl_item_stock` FOR EACH ROW BEGIN\nDECLARE count integer;\nSET @count:=(SELECT COUNT(kode_item) FROM tbl_mutasi_stock WHERE kode_item=new.kode_item AND tipe_mutasi=\'STOCK AKHIR\' AND tran_date=CURDATE());\n	IF(@count=0) THEN\n		INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'STOCK AKHIR\',new.stock);\n	ELSE\n		UPDATE tbl_mutasi_stock SET qty=new.stock WHERE tran_date=CURDATE() AND kode_item=new.kode_item AND tipe_mutasi=\'STOCK AKHIR\'; \n	END IF;\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER `beforeupdateitemstock` BEFORE UPDATE ON `tbl_item_stock` FOR EACH ROW BEGIN\nDECLARE count integer;\nDECLARE tempstock integer;\nSET @count:=(SELECT COUNT(kode_item) FROM tbl_mutasi_stock WHERE kode_item=new.kode_item AND tran_date=CURDATE());\n	IF(@count=0) THEN\n		SET @tempstock:=(SELECT stock FROM tbl_item_stock WHERE kode_item=new.kode_item);\n		INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'STOCK AWAL\',@tempstock);\n		INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'PURCHASE\',0);\n		INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'SALE\',0);\n		INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'STOCK OUT\',0);\n		INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'STOCK OPNAME\',0);\n		INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'STOCK AKHIR\',@tempstock);\n	END IF;\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER `afterinsertitemstock` AFTER INSERT ON `tbl_item_stock` FOR EACH ROW BEGIN\nDECLARE count integer;\nSET @count:=(SELECT COUNT(kode_item) FROM tbl_mutasi_stock WHERE kode_item=new.kode_item AND tran_date=CURDATE());\n	IF(@count=0) THEN\n		INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'STOCK AWAL\',new.stock);\n		INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'PURCHASE\',0);\n		INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'SALE\',0);\n		INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'STOCK OUT\',0);\n		INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'STOCK OPNAME\',0);\n		INSERT INTO tbl_mutasi_stock VALUES (UUID(),CURDATE(),new.kode_item,\'STOCK AKHIR\',new.stock);\n	END IF;\nEND'
sql_modes=1344274432 1344274432 1344274432
definers='root@localhost' 'root@localhost' 'root@localhost'
client_cs_names='utf8mb4' 'utf8mb4' 'utf8mb4'
connection_cl_names='utf8mb4_general_ci' 'utf8mb4_general_ci' 'utf8mb4_general_ci'
db_cl_names='latin1_swedish_ci' 'latin1_swedish_ci' 'latin1_swedish_ci'
